@startuml
' ======================================================
' C4 Model - Container Diagram
' Author: Your Full Name
' ======================================================

!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Container.puml

title CDR Processing System - Container Diagram

Person_Ext(sources, "Telecom Switches / Softswitches", "Produce raw CDRs (binary, plain text)")
System_Ext(bss, "External BSS System", "Consumes processed data for billing and operations")

System_Boundary(SystemCDR, "CDR Processing System") {
    
    Container(repo, "Main Repository", "File Storage", "Stores raw CDRs before processing")
    
    Container(etl, "ETL Orchestration", "Crontab + Bash + Java", "Schedules, transforms, and loads CDRs into the database")
    
    ContainerDb(db, "MySQL Cluster", "MySQL", "Stores processed data and applies business rules via procedures/functions")
    
    Container(bi, "BI Module", "PHP + JavaScript + Web Services", "Provides near real-time analytics and reports (~2h delay)")
    
    Container(reporting, "Reporting Engine", "Bash Scripts", "Generates monthly reports and CSV exports for consolidated data")
}

' Relationships
Rel(sources, repo, "Sends raw CDRs", "Binary / Plain Text")
Rel(repo, etl, "Schedules & triggers processing")
Rel(etl, db, "Loads transformed data")
Rel(db, bi, "Provides data for BI analytics")
Rel(db, reporting, "Provides data for reports")
Rel(bss, bi, "Queries processed data", "Web Services / Reports")

footer Author: Mauricio Lopez
@enduml
